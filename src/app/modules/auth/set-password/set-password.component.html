<p-toast />
<form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()">
    <div class="flex flex-column align-items-center justify-content-center">
        <div
            style="
            border-radius: 56px;
            padding: 0.3rem;
            background: linear-gradient(180deg, #199807 10%, rgb(38 244 67 / 0%) 30%)
            "
        >
            <div
                class="w-full surface-card py-8 px-5 sm:px-8"
                style="border-radius: 53px"
            >
                <div class="text-center mb-5">
                    <img
                        src="assets/image/logo/logo-honivy.jpg"
                        alt="Image"
                        width="100"
                        height="100"
                        class="mb-3"
                    />
                    <div class="text-600 text-2xl font-medium mb-3">
                       THIẾT LẬP MẬT KHẨU MỚI
                    </div>
                    <!-- <span class="text-600 font-medium"
                        >Thay đổi mật khẩu</span
                    > -->
                </div>

                <p-messages [(value)]="messages"></p-messages>

                <div>
                    <div class="mb-3">
                        <div class="field-group user_name">
                            <input
                                id="user"
                                class="input"
                                type="text"
                                spellcheck="false"
                                placeholder="Email"
                                formControlName="email"
                            />

                            <div
                                *ngIf="
                                    resetPasswordForm.get('email')?.invalid &&
                                    (resetPasswordForm.get('email')?.dirty ||
                                        resetPasswordForm.get('email')?.touched)
                                "
                            >
                                <div
                                    *ngIf="resetPasswordForm.get('email')?.errors?.['required']"
                                    class="error-message"
                                >
                                    Vui lòng nhập email
                                </div>
                                <div
                                    *ngIf="resetPasswordForm.get('email')?.errors?.['pattern']"
                                    class="error-message"
                                >
                                    Email không hợp lệ.
                                </div>
                            </div>
                            <span>
                                <svg
                                    stroke="currentColor"
                                    fill="currentColor"
                                    stroke-width="0"
                                    viewBox="0 0 24 24"
                                    height="1em"
                                    width="1em"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path fill="none" d="M0 0h24v24H0z"></path>
                                    <path
                                        d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"
                                    ></path>
                                </svg>
                            </span>
                        </div>
                      
                        <!-- [(ngModel)]="loginRequest.email" -->
                    </div>
                    <div class="mb-4">
                        <div class="field-group user_name">
                            <div class="password-wrapper">
                                <input
                                    id="user"
                                    [type]="showPassword ? 'text' : 'password'"
                                    spellcheck="false"
                                    class="input user_name"
                                    placeholder="Mật khẩu mới"
                                    formControlName="newPassword"
                                />
                                <button type="button" class="toggle-password" (click)="showPassword = !showPassword">
                                    <i [class]="showPassword ? 'fa fa-eye-slash' : 'fa fa-eye'"></i>
                                </button>
                            </div>
                            
                            <div
                                *ngIf="
                                    resetPasswordForm.get('newPassword')?.invalid &&
                                    (resetPasswordForm.get('newPassword')?.dirty ||
                                        resetPasswordForm.get('newPassword')?.touched)
                                "
                            >
                                <div
                                    *ngIf="resetPasswordForm.get('newPassword')?.errors?.['required']"
                                    class="error-message"
                                >
                                    Vui lòng nhập mật khẩu mới
                                </div>
                            </div>
                            <span>
                                <svg
                                    stroke="currentColor"
                                    fill="currentColor"
                                    stroke-width="0"
                                    viewBox="0 0 24 24"
                                    height="1em"
                                    width="1em"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        d="M18 8H20C20.5523 8 21 8.44772 21 9V21C21 21.5523 20.5523 22 20 22H4C3.44772 22 3 21.5523 3 21V9C3 8.44772 3.44772 8 4 8H6V7C6 3.68629 8.68629 1 12 1C15.3137 1 18 3.68629 18 7V8ZM16 8V7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7V8H16ZM11 14V16H13V14H11ZM7 14V16H9V14H7ZM15 14V16H17V14H15Z"
                                    ></path>
                                </svg>
                            </span>

                        </div>
                    </div>

                    <div class="mb-3">
                        <div class="field-group user_name">
                            <div class="password-wrapper">
                                <input
                                    id="confirmPassword"
                                    [type]="showPasswordConfim ? 'text' : 'password'"
                                    spellcheck="false"
                                    class="input user_name"
                                    placeholder="Xác nhận mật khẩu mới"
                                    formControlName="confirmPassword"
                                />
                                <button type="button" class="toggle-password" (click)="showPasswordConfim = !showPasswordConfim">
                                    <i [class]="showPasswordConfim ? 'fa fa-eye-slash' : 'fa fa-eye'"></i>
                                </button>
                            </div>
                            
                            <div
                            *ngIf="
                              resetPasswordForm.errors?.['passwordMismatch'] &&
                              (resetPasswordForm.get('confirmPassword')?.dirty ||
                                resetPasswordForm.get('confirmPassword')?.touched)
                            "
                          >
                            <div class="error-message">Mật khẩu xác nhận không khớp.</div>
                          </div>
                            <span>
                                <svg
                                    stroke="currentColor"
                                    fill="currentColor"
                                    stroke-width="0"
                                    viewBox="0 0 24 24"
                                    height="1em"
                                    width="1em"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        d="M18 8H20C20.5523 8 21 8.44772 21 9V21C21 21.5523 20.5523 22 20 22H4C3.44772 22 3 21.5523 3 21V9C3 8.44772 3.44772 8 4 8H6V7C6 3.68629 8.68629 1 12 1C15.3137 1 18 3.68629 18 7V8ZM16 8V7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7V8H16ZM11 14V16H13V14H11ZM7 14V16H9V14H7ZM15 14V16H17V14H15Z"
                                    ></path>
                                </svg>
                            </span>

                        </div>
                    </div>

                    <div class="mb-3">
                        <div class="field-group user_name">
                            <input
                                id="otp"
                                type="text"
                                placeholder="Mã OTP"
                                pInputText
                                class="md:w-30rem input user_name"
                                formControlName="otp"
                            />
                            <span>
                                <svg stroke="currentColor"
                                fill="currentColor" width="3em" height="1em" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
    
                                    <g id="OTP">
                                    
                                    <path d="M458.4741,112H265V62.41A31.3815,31.3815,0,0,0,233.5879,31H62.4077A31.3806,31.3806,0,0,0,31,62.41V449.59A31.4379,31.4379,0,0,0,62.4077,481h171.18A31.4388,31.4388,0,0,0,265,449.59V292H458.4771A22.5231,22.5231,0,0,0,481,269.4771V134.5259A22.5257,22.5257,0,0,0,458.4741,112ZM125.5,50.08h45a11.25,11.25,0,0,1,0,22.5h-45a11.25,11.25,0,0,1,0-22.5Zm44.9956,411.7651h-45a11.25,11.25,0,1,1,0-22.5h45a11.25,11.25,0,0,1,0,22.5ZM245.1982,420.25H50.7974V91.75H245.1982V112H125.3149A22.3149,22.3149,0,0,0,103,134.3149V269.6641A22.3357,22.3357,0,0,0,125.3359,292H166v36.1489a11.1221,11.1221,0,0,0,18.9868,7.8643L229,292h16.1982Zm-24.39-210.06a11.3086,11.3086,0,0,1,4.14,15.39,11.198,11.198,0,0,1-15.39,4.14L195.25,221.44V238a11.25,11.25,0,0,1-22.5,0V221.44L158.437,229.72a11.198,11.198,0,0,1-15.39-4.14,11.3164,11.3164,0,0,1,4.14-15.39L161.5,202l-14.313-8.28a11.2689,11.2689,0,0,1,11.25-19.5293L172.75,182.47V166a11.25,11.25,0,0,1,22.5,0v16.47l14.3086-8.2793a11.2689,11.2689,0,0,1,11.25,19.5293L206.5,202Zm108,0a11.3086,11.3086,0,0,1,4.14,15.39,11.198,11.198,0,0,1-15.39,4.14L303.25,221.44V238a11.25,11.25,0,0,1-22.5,0V221.44L266.437,229.72a11.198,11.198,0,0,1-15.39-4.14,11.3164,11.3164,0,0,1,4.14-15.39L269.5,202l-14.313-8.28a11.2689,11.2689,0,0,1,11.25-19.5293L280.75,182.47V166a11.25,11.25,0,0,1,22.5,0v16.47l14.3086-8.2793a11.2689,11.2689,0,0,1,11.25,19.5293L314.5,202Zm108,0a11.3086,11.3086,0,0,1,4.14,15.39,11.198,11.198,0,0,1-15.39,4.14L411.25,221.44V238a11.25,11.25,0,0,1-22.5,0V221.44L374.437,229.72a11.198,11.198,0,0,1-15.39-4.14,11.3164,11.3164,0,0,1,4.14-15.39L377.5,202l-14.313-8.28a11.2689,11.2689,0,0,1,11.25-19.5293L388.75,182.47V166a11.25,11.25,0,0,1,22.5,0v16.47l14.3086-8.2793a11.2689,11.2689,0,0,1,11.25,19.5293L422.5,202Z"/>
                                    
                                    </g>
                                    
                                </svg>
                            </span>
                        </div>
                    </div>

                    <div style="float: right; padding-bottom: 10px;">
                        <a [routerLink]="['/resend-email-otp']"
                            class="font-medium no-underline ml-2 text-right cursor-pointer"
                            style="color:rgba(0, 0, 0, 0.66);"
                            >Lấy lại mã OTP!</a
                        >
                    </div>
                 
                    <button
                    *ngIf="!otpSent"
                    style="background-color: #4d8526;"
                        pButton
                        pRipple
                        label="XÁC NHẬN"
                        class="w-full p-3 text-xl"
                        type="submit"
                    ></button>

                    <button
                    *ngIf="otpSent"
                    style="background-color: #4d8526;"
                        pButton
                        pRipple
                        label="Quay lại trang đăng nhập"
                        class="w-full p-3 text-xl"
                        type="submit"
                        (click)="navigateToSetPassword()"
                    ></button>
                </div>
            </div>
        </div>
    </div>
</form>




<!-- [routerLink]="['/']" -->
