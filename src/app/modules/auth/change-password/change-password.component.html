<p-toast />
<form [formGroup]="changePasswordForm" (ngSubmit)="onSubmit()">
    <div class="flex flex-column align-items-center justify-content-center">
        <div
            style="
            border-radius: 56px;
            padding: 0.3rem;
            background: linear-gradient(180deg, #199807 10%, rgb(38 244 67 / 0%) 30%)
            "
        >
            <div
                class="w-full surface-card py-8 px-5 sm:px-8"
                style="border-radius: 53px"
            >
                <div class="text-center mb-5">
                    <img
                        src="assets/image/logo/logo-honivy.jpg"
                        alt="Image"
                        width="100"
                        height="100"
                        class="mb-3"
                    />
                    <div class="text-600 text-2xl font-medium mb-3">
                      Đổi mật khẩu mới
                    </div>
                    <!-- <span class="text-600 font-medium"
                        >Thay đổi mật khẩu</span
                    > -->
                </div>

                <p-messages [(value)]="messages"></p-messages>

                <div>
                   
                    <div class="mb-4">
                        <div class="field-group user_name">
                            <div class="password-wrapper">
                                <input
                                    id="oldPassword"
                                    [type]="showPassword ? 'text' : 'password'"
                                    spellcheck="false"
                                    class="md:w-30rem input user_name"
                                    placeholder="Mật khẩu cũ"
                                    formControlName="oldPassword"
                                />
                                <button type="button" class="toggle-password" (click)="showPassword = !showPassword">
                                    <i [class]="showPassword ? 'fa fa-eye-slash' : 'fa fa-eye'"></i>
                                </button>
                            </div>
                            
                            <div
                                *ngIf="
                                    changePasswordForm.get('oldPassword')?.invalid &&
                                    (changePasswordForm.get('oldPassword')?.dirty ||
                                        changePasswordForm.get('oldPassword')?.touched)
                                "
                            >
                                <div
                                    *ngIf="changePasswordForm.get('oldPassword')?.errors?.['required']"
                                    class="error-message"
                                >
                                    Vui lòng nhập mật khẩu cũ
                                </div>
                            </div>
                            <span>
                                <svg
                                    stroke="currentColor"
                                    fill="currentColor"
                                    stroke-width="0"
                                    viewBox="0 0 24 24"
                                    height="1em"
                                    width="1em"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        d="M18 8H20C20.5523 8 21 8.44772 21 9V21C21 21.5523 20.5523 22 20 22H4C3.44772 22 3 21.5523 3 21V9C3 8.44772 3.44772 8 4 8H6V7C6 3.68629 8.68629 1 12 1C15.3137 1 18 3.68629 18 7V8ZM16 8V7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7V8H16ZM11 14V16H13V14H11ZM7 14V16H9V14H7ZM15 14V16H17V14H15Z"
                                    ></path>
                                </svg>
                            </span>

                        </div>
                    </div>

                    <div class="mb-3">
                        <div class="field-group user_name">
                            <div class="password-wrapper">
                                <input
                                    id="newPassword"
                                    [type]="showPasswordConfim ? 'text' : 'password'"
                                    spellcheck="false"
                                    class="md:w-30rem input user_name"
                                    placeholder="Xác nhận mật khẩu mới"
                                    formControlName="newPassword"
                                />
                                <button type="button" class="toggle-password" (click)="showPasswordConfim = !showPasswordConfim">
                                    <i [class]="showPasswordConfim ? 'fa fa-eye-slash' : 'fa fa-eye'"></i>
                                </button>
                            </div>
                            
                            <div
                            *ngIf="
                                changePasswordForm.get('newPassword')?.invalid &&
                                (changePasswordForm.get('newPassword')?.dirty ||
                                    changePasswordForm.get('newPassword')?.touched)
                            "
                        >
                                <div
                                    *ngIf="changePasswordForm.get('newPassword')?.errors?.['required']"
                                    class="error-message"
                                >
                                    Vui lòng nhập mật khẩu mới
                                </div>
                            </div>
                            <p *ngIf="errorMessages" class="error-message">
                                Mật khẩu mới không được trùng với mật khẩu cũ.
                            </p>
                            <span>
                                <svg
                                    stroke="currentColor"
                                    fill="currentColor"
                                    stroke-width="0"
                                    viewBox="0 0 24 24"
                                    height="1em"
                                    width="1em"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        d="M18 8H20C20.5523 8 21 8.44772 21 9V21C21 21.5523 20.5523 22 20 22H4C3.44772 22 3 21.5523 3 21V9C3 8.44772 3.44772 8 4 8H6V7C6 3.68629 8.68629 1 12 1C15.3137 1 18 3.68629 18 7V8ZM16 8V7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7V8H16ZM11 14V16H13V14H11ZM7 14V16H9V14H7ZM15 14V16H17V14H15Z"
                                    ></path>
                                </svg>
                            </span>

                        </div>
                    </div>
                 
                    <button
                    *ngIf="!otpSent"
                    style="background-color: #4d8526; margin-top: 10px;"
                        pButton
                        pRipple
                        label="XÁC NHẬN"
                        class="w-full p-3 text-xl"
                        type="submit"
                    ></button>

                    <button
                    *ngIf="otpSent"
                    style="background-color: #4d8526;"
                        pButton
                        pRipple
                        label="Quay lại trang đăng nhập"
                        class="w-full p-3 text-xl"
                        type="submit"
                        (click)="navigateToSetPassword()"
                    ></button>
                </div>
            </div>
        </div>
    </div>
</form>
